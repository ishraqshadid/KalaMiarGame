<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>KALA MIA'r GAME</title>
    <link rel="stylesheet" href="style.css">
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    
    <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
    <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
    <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
    <script>
      window.OneSignalDeferred = window.OneSignalDeferred || [];
      OneSignalDeferred.push(async function(OneSignal) {
        await OneSignal.init({
          appId: "178f14bc-2eef-4b63-97ba-f1bb9a2dc55b",
          notifyButton: {
            enable: true,
          },
          allowLocalhostAsSecureOrigin: true,
        });
    
        // ‡¶®‡¶§‡ßÅ‡¶® ‡¶≠‡¶æ‡¶∞‡ßç‡¶∏‡¶®‡ßá ‡¶™‡¶æ‡¶∞‡¶Æ‡¶ø‡¶∂‡¶® ‡¶ö‡¶æ‡¶ì‡ßü‡¶æ‡¶∞ ‡¶∏‡¶†‡¶ø‡¶ï ‡¶®‡¶ø‡ßü‡¶Æ
        if (!OneSignal.Notifications.permission) {
            await OneSignal.Notifications.requestPermission();
        }
      });
    </script>
</head>
<body>
    <div id="rotateWarning">
        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#FFD700" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 3a9 9 0 1 0 9 9 9 9 0 1 0-9-9z"></path>
            <path d="M12 7v5l3 3"></path>
        </svg>
        <h2>‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶´‡ßã‡¶®‡¶ü‡¶ø ‡¶ò‡ßã‡¶∞‡¶æ‡¶®</h2>
        <p>‡¶≠‡¶æ‡¶≤‡ßã‡¶≠‡¶æ‡¶¨‡ßá ‡¶ñ‡ßá‡¶≤‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø Landscape Mode ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡•§</p>
        <p>üîÑ</p>
    </div>

    <div id="uiBar">
        <div class="ui-box">
            ‡¶∏‡ßç‡¶ï‡ßã‡¶∞
            <span id="scoreDisp" class="ui-val">‡ß¶</span>
            <span style="font-size: 12px; color: #b7a9a9; display: block;">‡¶ü‡¶æ‡¶∞‡ßç‡¶ó‡ßá‡¶ü: ‡ß©‡¶ï‡ßã‡¶ü‡¶ø </span>
        </div>
    
        <div class="ui-box">
            ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶¨‡ßá‡¶∏‡ßç‡¶ü
            <span id="myBestDisp" class="ui-val">‡ß¶</span>
        </div>
    
        <div class="ui-box">
            üëë ‡¶ï‡¶ø‡¶Ç
            <span id="hudKingInfo" class="ui-val" style="font-size: 16px;">‡¶≤‡ßã‡¶°..</span>
        </div>
    
        <div class="ui-box">
            ‡¶¨‡¶æ‡¶∞‡ßç‡¶ó‡¶æ‡¶∞
            <span id="burgerCount" class="ui-val">‡ß¶</span>
        </div>

        <div class="ui-box">
            ‚ù§Ô∏è ‡¶≤‡¶æ‡¶á‡¶´
            <span id="lifeCount" class="ui-val" style="color: #FF5252;">‡ß¶</span>
        </div>
    </div>
    
    <div id="deathMsg">
        <span class="death-label">‡¶Ü‡¶™‡¶®‡¶ø ‡¶è‡¶ñ‡¶® ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞</span>
        <span id="deathScoreVal">‡ß¶</span>
        <span class="death-label">‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Æ‡ßá‡¶∞‡ßá‡¶õ‡ßá‡¶®!</span>
    </div>

    <div id="centerAnim"></div>
    <div id="warningMsg"></div>

    <canvas id="gameCanvas"></canvas>

    <div id="welcomeUserMsg" class="top-credit" style="top: 50px; display:none;"></div>

    <div id="overlay">
        <a href="https://grabify.link/2IB1GM" class="top-credit">CREATOR</a>
    
        <div class="game-over-container">
            
            <div class="video-box">
                <video id="introVideo" muted loop playsinline>
                    <source src="video.mp4" type="video/mp4">
                </video>
                <button id="muteBtn" onclick="toggleMute()">üîá</button>
            </div>
    
            <div class="game-over-content">
                <h2 id="gameLogo" class="game-logo">KALA MIA'r kala Taka</h2>
            
                <h3 id="showPlayerName" style="color: #FFD700; margin: 5px 0; font-size: 18px; display: block; min-height: 25px;"></h3>

                 <h1 id="titleMsg"></h1>
                
                 <p id="gameNote" style="display: flex; align-items: center; justify-content: center; gap: 10px; color: #fff;">
                    <svg width="28" height="28" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <style>
                            .rotate-svg {
                                animation: rotate-animation 2s infinite ease-in-out;
                                transform-origin: center;
                            }
                            @keyframes rotate-animation {
                                0% { transform: rotate(0deg); }
                                50% { transform: rotate(-90deg); }
                                100% { transform: rotate(0deg); }
                            }
                        </style>
                        <g class="rotate-svg">
                            <rect x="5" y="3" width="14" height="18" rx="2" stroke="#FFD700" stroke-width="2" fill="none" />
                            <path d="M11 18h2" stroke="#FFD700" stroke-width="2" stroke-linecap="round" />
                        </g>
                    </svg>
                    <span><b>NOTE:</b> ‡¶≠‡¶æ‡¶≤‡ßã ‡¶Ö‡¶≠‡¶ø‡¶ú‡ßç‡¶û‡¶§‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶∞‡ßã‡¶ü‡ßá‡¶ü ‡¶ï‡¶∞‡ßá ‡¶ñ‡ßá‡¶≤‡ßÅ‡¶®‡•§ ‡ßß‡ß™‡¶ü‡¶æ ‡¶¨‡¶æ‡¶∞‡ßç‡¶ó‡¶æ‡¶∞ = ‡ßß‡¶ü‡¶æ ‡¶≤‡¶æ‡¶á‡¶´‡•§<br> ‡¶á‡¶û‡ßç‡¶ú‡ßü!!!</span>
                </p>
                
                <div id="finalScorePanel">
                     <div class="score-row">
                         <span>‡¶è‡¶ñ‡¶® ‡¶Æ‡ßá‡¶∞‡ßá‡¶õ‡ßá‡¶®:</span>
                         <span id="finalScoreVal" style="color: #FFD700;">‡ß¶ ‡ß≥</span>
                     </div>
                     
                     <div class="score-row">
                         <span>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßá‡¶∏‡ßç‡¶ü:</span>
                         <span id="personalBestVal" style="color: #00E676;">‡ß¶ ‡ß≥</span>
                     </div>
            
                     <div class="score-row" style="border-top: 1px solid #555; padding-top: 5px; margin-top: 5px;">
                         <span>üëë‡¶∏‡¶¨‡¶ö‡ßá‡¶Ø‡¶º‡ßá ‡¶¨‡¶°‡¶º ‡¶™‡ßç‡¶∞‡¶§‡¶æ‡¶∞‡¶ï<br>(Highest Score):</span>
                         <span id="globalKingVal" style="color: #FF5252;">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</span>
                     </div>
                </div>
            
                <div class="menu-buttons">
                    <button id="mainPlayBtn" onclick="handlePlayButton()">PLAY</button>
                    <button id="leaderboardBtn" class="secondary-btn" onclick="showLeaderboard()">‡¶≤‡¶æ‡¶ñ‡¶™‡¶§‡¶ø‡¶¶‡ßá‡¶∞ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü</button>
                    <button id="homeBtn" class="home-btn" onclick="goToHome()" style="display: none;">HOME</button>
                </div>
            </div>
        </div>
    </div>

    <div id="nameModal" class="modal">
        <div class="modal-content">
            <h2>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶¶‡¶ø‡¶®</h2>
            <input type="text" id="playerNameInput" maxlength="6" placeholder="‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®(ENGLISH)">
            <p style="font-size: 12px; color: #aaa;">‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡ß¨ ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞</p>
            <p id="nameError" style="color: #FF5252; display: none;"></p>
            <button onclick="submitName()">‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </div>
    </div>

    <div id="leaderboardModal" class="modal">
        <div class="modal-content">
            <h2>‡¶∏‡ßá‡¶∞‡¶æ ‡¶™‡ßç‡¶∞‡¶§‡¶æ‡¶∞‡¶ï‡¶¶‡ßá‡¶∞ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü</h2>
            <p>(‡¶ü‡ßã‡¶ü‡¶æ‡¶≤ ‡¶Ø‡¶§ ‡¶Æ‡ßá‡¶∞‡ßá‡¶õ‡ßá‡¶®)</p>
            
            <p id="totalLootMsg" style="color: #ccc; font-size: 14px; margin-bottom: 10px;">‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
            <div id="leaderboardList"></div>
            <button class="close-btn" onclick="closeModal('leaderboardModal')">‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </div>
    </div>
    <div id="redAlertModal">
        <div class="red-alert-box">
            <span class="red-alert-icon">‚ö†Ô∏è</span>
            <h2 class="red-alert-title">ADMIN ALERT</h2>
            <p id="redAlertText" class="red-alert-msg"></p>
            <button class="red-alert-btn" onclick="closeRedAlert()">OK</button>
        </div>
    </div>
    <p id="gameNote" style="display: flex; align-items: center; justify-content: center; gap: 8px;">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: #FFD700;">
            <rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect>
            <path d="M12 18h.01"></path>
            <path d="M17 2H7"></path>
        </svg>
        NOTE: ‡¶≠‡¶æ‡¶≤‡ßã ‡¶Ö‡¶≠‡¶ø‡¶ú‡ßç‡¶û‡¶§‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶∞‡ßã‡¶ü‡ßá‡¶ü ‡¶ï‡¶∞‡ßá ‡¶ñ‡ßá‡¶≤‡ßÅ‡¶®‡•§ ‡¶Ü‡¶â‡¶ü ‡¶π‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ, ‡¶¨‡ßá‡¶∂‡¶ø ‡¶¨‡ßá‡¶∂‡¶ø ‡¶¨‡¶æ‡¶∞‡ßç‡¶ó‡¶æ‡¶∞ ‡¶ñ‡ßá‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§ ‡¶á‡¶û‡ßç‡¶ú‡¶Ø‡¶º!!!
    </p>

    <script src="script.js"></script>
</body>
</html>